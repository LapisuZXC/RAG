

# üöÄ RAG Project

–ü—Ä–æ–µ–∫—Ç –ø–æ –≤—ã–∫–∞—á–∏–∞–Ω–∏—é –±–∞–±–ª–∞ –∏–∑ –ª—é–¥–µ–π —Ç–µ–ø–µ—Ä—å –≤ Kubernetes!

---

## üì¶ –ß—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

- [Minikube](https://minikube.sigs.k8s.io/docs/start/)
- [kubectl](https://kubernetes.io/docs/tasks/tools/)

> üîç –î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ "–ø–æ–≥—É–≥–ª–∏—Ç—å".

---

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫ Minikube

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–µ–π –û–°:

- **WSL / Windows**:
  ```bash
  minikube start --driver=docker
  ```

- **Linux**:
  ```bash
  minikube start
  ```

---

## üß™ –†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–í —Å–∫—Ä–∏–ø—Ç–∞—Ö `init_parser` –∏ `daily_parser` –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `TEST_MODE`, –∫–æ—Ç–æ—Ä–∞—è:

- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥ –æ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∞

---

## üöÄ –î–µ–ø–ª–æ–π –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
./deploy.sh
```

–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç:

- –°–æ–∑–¥–∞—Å—Ç—Å—è Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –≤ –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç
- –ó–∞–ø—É—Å—Ç–∏—Ç—Å—è `Deployment` —Å –±–∞–∑–æ–≤—ã–º –ø–∞—Ä—Å–µ—Ä–æ–º `parser-base`
- –ó–∞–ø—É—Å—Ç–∏—Ç—Å—è `Job`, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π `init_parser`
- –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `Job`, –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è `CronJob`, –∑–∞–ø—É—Å–∫–∞—é—â–∏–π `daily_parser`

> üïí –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å –≤ `k8s/cronjob.yaml`. –î–ª—è —Ç–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `* * * * *` ‚Äî –∫–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É.

---

## üîß –†–∞–±–æ—Ç–∞ —Å Kubernetes

- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã:
  ```bash
  kubectl get all
  ```

- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ Pod-–∞:
  ```bash
  kubectl logs <pod-name>
  ```

- –ó–∞–π—Ç–∏ –≤–Ω—É—Ç—Ä—å Pod-–∞:
  ```bash
  kubectl exec -it <pod-name> -- bash
  ```

> ‚ö†Ô∏è –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Python –≤–Ω—É—Ç—Ä–∏ Pod-–∞, –≤—ã—Ö–æ–¥–∏—Ç–µ —á–µ—Ä–µ–∑ `exit()`.  
> –ò–Ω–∞—á–µ ‚Äî –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ (–Ω—É –∏–ª —Ö—Ä–µ–Ω –µ–≥–æ –∑–Ω–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞—Ç—å):
> ```bash
> jobs
> kill $<number-of-job>
> ```

---

## üó∫Ô∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è, –≤–æ—Ç –∫—Ä–∞—Ç–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:

```mermaid
graph TD
    A[–ó–∞–ø—É—Å–∫ ./deploy.sh] --> B[–°–æ–∑–¥–∞–Ω–∏–µ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞]
    B --> C[Deployment: parser-base]
    C --> D[Job: init_parser]
    D --> E[CronJob: daily_parser]
```

> *Mermaid-–¥–∏–∞–≥—Ä–∞–º–º–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ GitHub, –∏–Ω–∞—á–µ delete*

---

## üóÉÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
RAG/
‚îú‚îÄ‚îÄ util/
‚îú‚îÄ‚îÄ etl/
‚îÇ   ‚îú‚îÄ‚îÄ init_parser.py  # –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–π –ø–∞—Ä—Å–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ daily_parser.py    # –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø–∞—Ä—Å–µ—Ä
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ *.csv                # –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ csv
‚îú‚îÄ‚îÄ logger/
‚îÇ   ‚îî‚îÄ‚îÄ logger.py            # –∫–æ–¥ –¥–ª—è –ª–æ–≥–æ–≤
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ k8s/
‚îÇ   ‚îú‚îÄ‚îÄ deployment.yaml
‚îÇ   ‚îú‚îÄ‚îÄ cronjob.yaml
‚îÇ   ‚îú‚îÄ‚îÄ persistent-volume.yaml  # –≤–Ω–µ—à–Ω—è—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ job.yaml
‚îú‚îÄ‚îÄ deploy.sh              # –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è
‚îî‚îÄ‚îÄ README.md
```

---

## üñºÔ∏è –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤ –∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã

### üîç –ü—Ä–∏–º–µ—Ä: `kubectl get all`

> ![kubectl get all](screenshots/all_elements.png)

### üìÑ –ü—Ä–∏–º–µ—Ä: –õ–æ–≥–∏ init_parser

> ![init_parser logs](screenshots/init_parsing_logs.png)

### üìÑ –ü—Ä–∏–º–µ—Ä: –õ–æ–≥–∏ daily_parser

> ![init_parser logs](screenshots/daily_parsing_logs.png)

### üíª –ü—Ä–∏–º–µ—Ä: –í—Ö–æ–¥ –≤–Ω—É—Ç—Ä—å pod-–∞

> ![exec into pod](screenshots/extract_data_example.png)

---

